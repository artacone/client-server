# client-server
Клиент-сервер для передачи файлов по сети

### Cборка и запуск
Сборка проекта
```shell
make
```
Запуск сервера
```shell
./server.out [port_to_listen dir_name]
```
Запуск клиента
```shell
./client.out [server_ip server_port file_to_send]
```

### Описание
- Сервер слушает `port_to_listen`, получает файл от клиента
и сохраняет его в `dir_name`. Если не указывать аргументы,
будет выбран порт по умолчанию и папка, в которой находится исполняемый файл.
Сервер может принимать параллельно несколько файлов:
для работы с каждым подключением создается новый дочерний процесс.

- Клиент отправляет на сервер `server_ip:server_port` файл `file_to_send`.
Если не указывать аргументы, будет выбран адрес по умолчанию и файл `send.txt`, 
который для удобства тестировния есть в репозитории.

- Весь код написан на языке Си без использования различных сетевых фреймворков
и работает на MacOS/Linux.

### TODO and Known issues
- [ ] Нормальное логирование с timestamp'ами.
- [ ] Возможность указания у клиента с каким именем файла создать
файл на сервере
- [ ] "Умная" обработка ошибок. Например, на некоторых фейлах
  `write()` необязательно выходить, можно обойтись `continue;`
- [ ] В случае ошибок на сервере сейчас могут оставаться зомби.
Лучшим решениям, чем сейчас, было бы следующее: пул рабочих (`pthreads`).
Главный тред кладет соединения в очередь, рабочие забирают их и скачивают файлы.
Очередь можно сделать на семафоре.
